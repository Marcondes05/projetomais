{% extends "base.html" %}
{% block title %}Projetos Cadastrados{% endblock %}

{% block content %}

<div class="pagina">

    <h1 class="titulo-principal">Projetos Cadastrados</h1>

    <!-- FILTROS (ainda estáticos por enquanto) -->
    <div class="filter-box">
        <input type="text" placeholder="Buscar por título..." class="input-text">

        <select class="input-select">
            <option>Tipo</option>
            <option>Pesquisa</option>
            <option>Extensão</option>
            <option>Ensino</option>
        </select>

        <select class="input-select">
            <option>Ano</option>
            <option>2024</option>
            <option>2023</option>
            <option>2022</option>
        </select>

        <button class="btn-filtrar">Filtrar</button>
    </div>

    <!-- LISTAGEM DE PROJETOS -->
    {% if projetos %}
        {% for p in projetos %}
            <div class="project-card">

                <!-- Cabeçalho -->
                <div class="project-header">
                    <div class="project-title">{{ p.titulo }}</div>

                    <!-- Botão visualizar (a rota ainda criaremos mais tarde) -->
                    <a class="btn-view" href="#">Visualizar</a>
                </div>

                <!-- Corpo -->
                <div class="project-body">

                    <!-- Lista de alunos -->
                    <div>
                        <strong>Alunos:</strong>
                        {% if p.estudantes %}
                            {% for aluno in p.estudantes %}
                                {{ aluno.nome }}{% if not loop.last %}, {% endif %}
                            {% endfor %}
                        {% else %}
                            Nenhum aluno vinculado
                        {% endif %}
                    </div>

                    <!-- Orientador -->
                    <div>
                        <strong>Orientador:</strong> 
                        {{ p.orientador.nome }}
                        &nbsp;·&nbsp;
                        <strong>Ano:</strong> {{ p.ano }}
                    </div>

                </div>

            </div>
        {% endfor %}
        
    {% else %}

        <p>Nenhum projeto encontrado.</p>

    {% endif %}

</div>

{% endblock %}
